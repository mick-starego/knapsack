(()=>{let e,t=[],n=50,o=2.5,i={},r=0;function a(){const e=document.getElementById("config-form"),t=new FormData(e);n=y(t.get("target")),o=y(t.get("tax")),l()}function c(e){e.preventDefault();const n=new FormData(e.target);e.target.reset(),e.target.querySelector("button").disabled=!0,t=[{name:n.get("name"),unitPrice:y(n.get("price")),category:n.get("category")},...t],s(),l()}function d(){const e=document.getElementById("item-form"),n=new FormData(e),o=e.querySelector("button");let i=n.get("name");t.map(e=>e.name).includes(i)&&(i=null);const r=y(n.get("price")),a=n.get("category");o.disabled=!i||!r||!a}function l(){n&&null!=o&&t.length?(function(){document.getElementById("receipt").innerHTML="";const e=document.getElementById("step-3-help");e.innerText="",e.classList.add("visually-hidden"),document.getElementById("spinner").classList.remove("visually-hidden")}(),e&&e.terminate(),e=new Worker("knapsack.bundle.js"),e.postMessage({target:n,tax:o,itemList:t}),e.onmessage=function(e){i=e.data,r=0,m()}):(i={},r=0,m())}function s(){document.getElementById("item-list").innerHTML="",t.forEach(u)}function m(){document.getElementById("receipt").innerHTML="",document.getElementById("spinner").classList.add("visually-hidden");const e=document.getElementById("step-3-help");e.classList.remove("visually-hidden");const t=document.getElementById("shuffle-button");i.data?.length>1?t.classList.remove("visually-hidden"):t.classList.add("visually-hidden"),i.error?e.innerText=`Error: ${i.error}`:i.data?.length?(e.innerText=`Found ${i.numSolutions.toLocaleString()} Solutions`,i.data[r].forEach(g)):e.innerText="No solutions found. Try adding more items!"}function u(e){const n=document.getElementById("item-template").content.cloneNode(!0);n.querySelector(".item-name").textContent=e.name,n.querySelector(".item-price").textContent="$"+e.unitPrice.toFixed(2),n.querySelector(".category").classList.add("category--"+e.category),n.querySelector(".clear").onclick=()=>{return n=e.name,t=t.filter(e=>e.name!==n),s(),d(),void l();var n},document.getElementById("item-list").prepend(n)}function g(e){const t=document.getElementById("receipt-item-template").content.cloneNode(!0);t.querySelector(".item-name").textContent=e.name;const n=t.querySelector(".item-quantity");n.textContent=e.quantity,e.quantity||(n.style.display="none"),t.querySelector(".item-total").textContent="$"+e.totalPrice.toFixed(2),t.querySelector(".list-group-item").classList.add("category--"+e.category),document.getElementById("receipt").appendChild(t)}function y(e){const t=parseFloat(e);return isNaN(t)?null:Number(t.toFixed(2))}window.addEventListener("DOMContentLoaded",()=>{document.getElementById("config-form").addEventListener("change",a);const e=document.getElementById("item-form");e.addEventListener("input",d),e.addEventListener("submit",c)})})();